local import = import
local Build = import "android.os.Build"
local AlertDialogBuilder = import "android.app.AlertDialog$Builder"
local Context = import "android.content.Context"


local deviceModel = Build.MODEL
local manufacturer = Build.MANUFACTURER
local productName = Build.PRODUCT
local brand = Build.BRAND
local device = Build.DEVICE
local board = Build.BOARD
local hardware = Build.HARDWARE


local deviceInfo = string.format([[
Device Name: %s
Manufacturer: %s
Brand: %s
Product: %s
Device: %s
Hardware: %s
Board: %s
Android Version: %s (SDK %d)]],
deviceModel,
manufacturer,
brand,
productName,
device,
hardware,
board,
Build.VERSION.RELEASE,
Build.VERSION.SDK_INT)
local builder = AlertDialogBuilder(activity)
builder.setTitle("Device Information")
.setMessage(deviceInfo)
.setPositiveButton("OK", nil)
.setIcon(activity.getResources().getIdentifier("ic_dialog_info", "drawable", activity.getPackageName()))
.setCancelable(false)

local dialog = builder.create()
dialog.show()


local btnCopy = dialog.getButton(dialog.BUTTON_POSITIVE)
btnCopy.setText("Copy Info")
btnCopy.setOnClickListener(function()

  local clipboard = activity.getSystemService(Context.CLIPBOARD_SERVICE)
  local clip = import "android.content.ClipData".newPlainText("Device Info", deviceInfo)
  clipboard.setPrimaryClip(clip)


  import "android.widget.Toast"
  Toast.makeText(activity, "Device info copied to clipboard!", Toast.LENGTH_SHORT).show()

  dialog.dismiss()
end)

import "android.content.*"
import "android.os.BatteryManager"


local filter = IntentFilter(Intent.ACTION_BATTERY_CHANGED)
local batteryStatus = activity.registerReceiver(nil, filter)


local status = batteryStatus.getIntExtra(BatteryManager.EXTRA_STATUS, -1)
local isCharging = (status == BatteryManager.BATTERY_STATUS_CHARGING)
or (status == BatteryManager.BATTERY_STATUS_FULL)


local prompt
if isCharging then
  prompt = "‚ö° Phone is charging - Safe to proceed"
 else
  prompt = "üîã Phone NOT charging - Connect charger first!"
end
ÊèêÁ§∫(prompt) 